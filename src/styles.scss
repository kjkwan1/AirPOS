// ==========================================================================
// AirPOS Global Stylesheet
// A mobile-first, lightweight styling foundation
// ==========================================================================

// 1. Theme Configuration
// --------------------------------------------------------------------------
// Core theme colors with variations
$themes: (
    light: (
        primary: #4A90E2,
        primary-light: #72AEF3,
        primary-dark: #2B71C4,
        secondary: #50E3C2,
        secondary-light: #7DECD5,
        secondary-dark: #29C6A3,
        accent: #FF9F43,
        success: #28C76F,
        warning: #FF9F43,
        danger: #EA5455,
        info: #00CFE8,
        background: #FFFFFF,
        surface: #F8F9FA,
        text-primary: #2C3E50,
        text-secondary: #606F7B,
        text-tertiary: #8795A1,
        border: #DAE1E7,
        divider: #EEF2F7,
        shadow: rgba(0, 0, 0, 0.1)
    ),
    dark: (
        primary: #4A90E2,
        primary-light: #72AEF3,
        primary-dark: #2B71C4,
        secondary: #50E3C2,
        secondary-light: #7DECD5,
        secondary-dark: #29C6A3,
        accent: #FF9F43,
        success: #28C76F,
        warning: #FF9F43,
        danger: #EA5455,
        info: #00CFE8,
        background: #1A1F2C,
        surface: #242B3D,
        text-primary: #E9ECEF,
        text-secondary: #CED4DA,
        text-tertiary: #ADB5BD,
        border: #3B4253,
        divider: #2D3446,
        shadow: rgba(236, 236, 236, 0.25)
    )
);

// 2. Typography Configuration
// --------------------------------------------------------------------------
$font-family-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, sans-serif;
$font-family-mono: 'SF Mono', SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace;

// Font sizes using a modular scale (1.250 - Major Third)
$font-sizes: (
    xs: 0.64rem,
    // 10.24px
    sm: 0.8rem,
    // 12.80px
    base: 1rem,
    // 16.00px
    md: 1.25rem,
    // 20.00px
    lg: 1.563rem,
    // 25.00px
    xl: 1.953rem,
    // 31.25px
    2xl: 2.441rem,
    // 39.06px
    3xl: 3.052rem // 48.83px
);

// Line heights
$line-heights: (
    none: 1,
    tight: 1.25,
    snug: 1.375,
    normal: 1.5,
    relaxed: 1.625,
    loose: 2
);

// Font weights
$font-weights: (
    light: 300,
    regular: 400,
    medium: 500,
    semibold: 600,
    bold: 700
);

// 3. Spacing Configuration
// --------------------------------------------------------------------------
$spacing-unit: 0.25rem; // 4px
$spacings: (
    0: 0,
    1: $spacing-unit,
    // 4px
    2: $spacing-unit * 2,
    // 8px
    3: $spacing-unit * 3,
    // 12px
    4: $spacing-unit * 4,
    // 16px
    5: $spacing-unit * 6,
    // 24px
    6: $spacing-unit * 8,
    // 32px
    7: $spacing-unit * 12,
    // 48px
    8: $spacing-unit * 16,
    // 64px
    9: $spacing-unit * 24,
    // 96px
    10: $spacing-unit * 32 // 128px
);

// 4. Breakpoints (Mobile First)
// --------------------------------------------------------------------------
$breakpoints: (
    xs: 0,
    sm: 576px,
    md: 768px,
    lg: 992px,
    xl: 1200px,
    2xl: 1400px
);

// 5. Border Radius
// --------------------------------------------------------------------------
$border-radius: (
    none: 0,
    sm: 0.125rem,
    base: 0.25rem,
    md: 0.375rem,
    lg: 0.5rem,
    xl: 0.75rem,
    2xl: 1rem,
    full: 9999px
);

// 6. Box Shadows
// --------------------------------------------------------------------------
$theme-shadows: (
    light: (
        sm: (0 1px 2px var(--color-shadow)),
        base: (0 1px 3px var(--color-shadow)),
        md: (0 4px 6px var(--color-shadow)),
        lg: (0 10px 15px var(--color-shadow)),
        xl: (0 20px 25px var(--color-shadow)),
        inner: inset 0 2px 4px var(--color-shadow)
    ),
    dark: (
        sm: (0 1px 2px var(--color-shadow)),
        base: (0 1px 3px var(--color-shadow)),
        md: (0 4px 6px var(--color-shadow)),
        lg: (0 10px 15px var(--color-shadow)),
        xl: (0 20px 25px var(--color-shadow)),
        inner: inset 0 2px 4px var(--color-shadow)
    )
);
// 7. Z-index Scale
// --------------------------------------------------------------------------
$z-indices: (
    behind: -1,
    base: 0,
    above: 1,
    dropdown: 1000,
    sticky: 1020,
    fixed: 1030,
    modal-backdrop: 1040,
    modal: 1050,
    popover: 1060,
    tooltip: 1070
);

// 8. Transitions
// --------------------------------------------------------------------------
$transitions: (
    base: all 0.2s ease-in-out,
    fast: all 0.1s ease-in-out,
    slow: all 0.3s ease-in-out
);

// 9. Gradients
// --------------------------------------------------------------------------
$theme-gradients: (
    light: (
        primary: linear-gradient(45deg, var(--color-primary-light) 0%, var(--color-primary) 50%, var(--color-primary-dark) 100%),
        secondary: linear-gradient(45deg, var(--color-secondary-light) 0%, var(--color-secondary) 50%, var(--color-secondary-dark) 100%),
        accent: linear-gradient(45deg, lighten(#FF9F43, 10%) 0%, var(--color-accent) 100%),
        success: linear-gradient(45deg, lighten(#28C76F, 10%) 0%, var(--color-success) 100%),
        warning: linear-gradient(45deg, lighten(#FF9F43, 10%) 0%, var(--color-warning) 100%),
        danger: linear-gradient(45deg, lighten(#EA5455, 10%) 0%, var(--color-danger) 100%),
        surface: linear-gradient(180deg, var(--color-surface) 80%, var(--color-background) 100%),
        surface-flip: linear-gradient(0deg, var(--color-surface) 80%, var(--color-background) 100%)
    ),
    dark: (
        primary: linear-gradient(45deg, var(--color-primary-light) 0%, var(--color-primary) 50%, var(--color-primary-dark) 100%),
        secondary: linear-gradient(45deg, var(--color-secondary-light) 0%, var(--color-secondary) 50%, var(--color-secondary-dark) 100%),
        accent: linear-gradient(45deg, lighten(#FF9F43, 5%) 0%, var(--color-accent) 100%),
        success: linear-gradient(45deg, lighten(#28C76F, 5%) 0%, var(--color-success) 100%),
        warning: linear-gradient(45deg, lighten(#FF9F43, 5%) 0%, var(--color-warning) 100%),
        danger: linear-gradient(45deg, lighten(#EA5455, 5%) 0%, var(--color-danger) 100%),
        surface: linear-gradient(180deg, var(--color-surface) 80%, var(--color-background) 100%),
        surface-flip: linear-gradient(0deg, var(--color-surface) 80%, var(--color-background) 100%),
    )
);
// 10. Mixins
// --------------------------------------------------------------------------
@mixin theme-aware($property, $color-key, $selector: '&') {
    @each $theme-name, $theme-colors in $themes {
        .theme-#{$theme-name} #{$selector} {
            #{$property}: map-get($theme-colors, $color-key);
        }
    }
}

@mixin mobile-first($breakpoint) {
    @if map-has-key($breakpoints, $breakpoint) {
        @media (min-width: map-get($breakpoints, $breakpoint)) {
            @content;
        }
    }

    @else {
        @warn "Invalid breakpoint: #{$breakpoint}.";
    }
}

// 11. Base Styles
// --------------------------------------------------------------------------
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    font-size: 16px;
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
}

body {
    font-family: $font-family-primary;
    line-height: map-get($line-heights, normal);
    @include theme-aware('background-color', 'background');
    @include theme-aware('color', 'text-primary');
}

// 12. Typography Styles
// --------------------------------------------------------------------------
h1,
h2,
h3,
h4,
h5,
h6 {
    font-weight: map-get($font-weights, light);
    line-height: map-get($line-heights, tight);
    margin: 1em 0;
}

h1 {
    font-size: map-get($font-sizes, 3xl);
    letter-spacing: map-get($spacings, 1);
}

h2 {
    font-size: map-get($font-sizes, 2xl);
    letter-spacing: map-get($spacings, 1);
}

h3 {
    font-size: map-get($font-sizes, xl);
    letter-spacing: map-get($spacings, 1);
}

h4 {
    font-size: map-get($font-sizes, lg);
    letter-spacing: map-get($spacings, 1);
}

h5 {
    font-size: map-get($font-sizes, md);
    letter-spacing: map-get($spacings, 1);
}

h6 {
    font-size: map-get($font-sizes, base);
    letter-spacing: map-get($spacings, 1);
}

p {
    margin: 0;
    line-height: map-get($line-heights, normal);
    font-size: map-get($font-sizes, sm)
}

// 13. Utility Classes
// --------------------------------------------------------------------------
.text-truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
}

// 14. Theme Switching
// --------------------------------------------------------------------------
// Default theme
body {
    @extend .theme-dark;
}

// Apply theme classes
@each $theme-name, $theme-colors in $themes {
    .theme-#{$theme-name} {
        @each $color-key, $color-value in $theme-colors {
            --color-#{$color-key}: #{$color-value};
        }
    }
}

// --------------------------------------------------------------------------
:root {
    @each $color-key, $color-value in map-get($themes, 'light') {
        --color-#{$color-key}: #{$color-value};
    }

    @each $shadow-key, $shadow-value in map-get($theme-shadows, 'light') {
        --shadow-#{$shadow-key}: #{$shadow-value};
    }

    @each $gradient-key, $gradient-value in map-get($theme-gradients, 'light') {
        --gradient-#{$gradient-key}: #{$gradient-value};
    }

    @each $key, $value in $border-radius {
        --border-radius-#{$key}: #{$value};
    }

    @each $key, $value in $transitions {
        --transition-#{$key}: #{$value};
    }
}

.theme-dark {
    @each $color-key, $color-value in map-get($themes, 'dark') {
        --color-#{$color-key}: #{$color-value};
    }

    @each $gradient-key, $gradient-value in map-get($theme-gradients, 'dark') {
        --gradient-#{$gradient-key}: #{$gradient-value};
    }
    
    @each $shadow-key, $shadow-value in map-get($theme-shadows, 'dark') {
        --shadow-#{$shadow-key}: #{$shadow-value};
    }
}

@each $gradient-key, $gradient-value in map-get($theme-gradients, 'light') {
    .bg-gradient-#{$gradient-key} {
        background: var(--gradient-#{$gradient-key});
    }
}

@each $shadow-key, $shadow-value in map-get($theme-shadows, 'light') {
    .shadow-#{$shadow-key} {
        box-shadow: var(--shadow-#{$shadow-key});
    }
}

// 15. Layouts
// --------------------------------------------------------------------------

$header-height: 48px;
$footer-height: 30px;